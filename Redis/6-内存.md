### Redis缓存过期与内存淘汰机制
- 缓存过期处理
  - （主动）定时删除。Redis会定时的抽查一些随机的key，默认1秒钟抽查10次（可配置），一旦抽查到某一个key是过期的，Redis就会删除这个key。
  - （被动）惰性删除。客户端在请求的时候，有可能会请求到一个已经过期的key，这种时候就是删除这个key的时候。用户在请求查询某一个key的时候，那么 redis 会检查这个 key 是否过期，如果过期则删除，返回一个 nil，这种策略对 CPU 比较友好，不会有太多的损耗，但缺点是过期的key无法及时删除。
  
- 内存淘汰机制
  如果reids达到最大内存时，会发生内存置换。
  淘汰策略有
  - 不删除任何数据（默认）
  - allkeys-lru 最近最少使用原则（推荐使用）
  - allkeys-lfu 最近最不经常使用原则（推荐使用）





6.内存
	内存回收策略
		惰性删除
		定时任务删除
	内存优化
		缩减键值对象的长度
		共享对象池
		字符串优化
		编码优化（使用Ziplist编码能节约内存，但会提高耗时-空间换时间）
		控制键的数量（如使用hash结构重构字符串结构）
	内存消耗
		对象内存
			存储着所有数据
		缓冲内存
			客户端缓冲
				通过参数client-output-buffer-limit控制
			复制积压缓冲区
				根据repl-backlog-size参数控制
			AOF缓冲区
				用于在Redis重写AOF文件期间保持最近的写入命令
		内存碎片
			可采用数据对齐和安全重启等方式规避内存碎片的问题